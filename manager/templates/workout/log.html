{% extends "base.html" %}
{% load i18n %} 
{% load staticfiles %}
{% load manager_extras %} 

{% block title %}{% trans "Weight log for workout" %} – {{ workout.creation_date }}{% endblock %}

{% block header %}
<script src="{% static 'js/d3.js' %}"></script>
{% endblock %}

{% block content %}
<h2>{% trans "Weight log for workout" %} {{ workout.id }}</h2>


{% if workout.comment %}
<p>
    <strong>{% trans "Goal" %}:</strong>
    <span class="dimmed">{{workout.comment}}</span>
</p>
{% endif %}

{% for day, exercise_log in workout_log.items %}
<h3>{{ day.description }}</h3>

<p>
<a href="{% url day-log day.id %}"
   title="{% trans 'Add weight log to this day' %}">
       <img src="{% static 'images/icons/statistics.svg' %}"
            width="32"
            height="32"
            alt="{% trans 'Add weight log to this day' %}">
    {% trans 'Add weight log to this day' %}
</a>
</p>

    {% for exercise, date_list in exercise_log.items %}
        <p><a href="{{ exercise.get_absolute_url }}">{{ exercise.name }}</a></p>
        
        {% if date_list.log_by_date %}
        <div style="overflow-x: auto;">
        <table class="noborder" style="border: 0 none; width: 7.5em;">
            <tr>
            {% with list=date_list.log_by_date %}
            {% for date, entry_list in list.items %}
            <td style="padding: 0em; border-top-width: 0px;">
                <table class="narrow" style="width: 7.5em;">
                    <tr>
                        <th>{{date|date:"d.m.Y"}}</th>
                    </tr>
                    {% for entry in entry_list %}
                    <tr>
                        <td>{{entry.reps}} {% trans "Reps" %} × {{entry.weight}}</td>
                    </tr>
                    {% endfor %}
                </table>
            </td>
            {% endfor %}
            {% endwith %}
            </tr>
        </table>
        </div>
        {% else %}
        <p><em>{% trans "No weight entries here." %}</em></p>
        {% endif %}
    
    {% with list=date_list.log_by_reps %}
    
    {% endwith %}
    
    {% empty%}
    <p>
        <em>{% trans "No exercises for this day." %}</em>
    </p>
    {% endfor %}
{% endfor %}



<table class="bordertable narrow">
<thead>
    <tr>
        <th>Name</th>
        <th>Datum</th>
        <th>Reps</th>
        <th>Weight</th>
    </tr>
</thead>
{% for log_entry in workout.workoutlog_set.all %}
    <tr>
        <td>{{log_entry.exercise.name}}</td>
        <td>{{log_entry.date}}</td>
        <td>{{log_entry.reps}}</td>
        <td>{{log_entry.weight}}</td>
    </tr>
{% endfor %}
</table>

{% endblock %}



<!--
        Side bar
-->
{% block sidebar %}
<h3>{% trans "Options" %}</h3>
<p>
<a href="{% url workout-view workout.id %}">
    {% trans "Back to workout" %}
</a>
</p>
{% endblock %}
