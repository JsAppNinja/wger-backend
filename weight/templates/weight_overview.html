{% extends "base.html" %}
{% load i18n %}
{% load staticfiles %}

<!--
        Title
-->
{% block title %}{% trans "Weight overview" %}{% endblock %}

<!-- 
        Header data
-->
{% block header %}
<script src="{% static 'js/jquery-ui.js' %}"></script>
<script src="{% static 'js/workout-manager.js' %}"></script>
<script src="{% static 'js/d3.js' %}"></script>
<script src="{% static 'js/jquery-globalize/lib/globalize.js' %}"></script>



<script type="text/javascript">

// Initialise the datepicker for the modal dialog
function custom_modal_init()
{
    init_weight_datepicker();
}
$(document).ready(function () {

$.getJSON("/weight/api/get_weight_data/", function(json) {
    weight_chart(json);
});

$("#weight_filter_from").datepicker({ dateFormat: "dd.mm.yy",
                                      minDate: {{min_date}}
                                  });
$("#weight_filter_to").datepicker({ dateFormat: "dd.mm.yy",
                                    maxDate: {{max_date}}
                                 });

    // Init the modal dialog
    form_modal_dialog();





//alert(data);


});
</script>
{% endblock %}


<!--
        Main Content
-->
{% block content %}

<h2>{% trans "Weight overview" %}</h2>

<div id="weight_diagram"></div>

<p>
<a href="{% url weight.views.add None %}" class="modal-dialog">{% trans "Add weight entry" %}</a>
</p>

<p>
    <em>{% trans "You can click on a value on the chart to edit it. "%}</em>
</p>

{% endblock %}


<!--
        Side bar
-->
{% block sidebar %}
<h3>{% trans "Filter options" %}</h3>
<form>
{% trans "from" %}
<input type="text"
       id="weight_filter_from"
       name="weight_filter_from"
       maxlength="9"
       style="width: 6em;">
{% trans "till" %}
<input type="text"
       id="weight_filter_to"
       name="weight_filter_to"
       maxlength="9"
       style="width: 6em;">
<input class="ajax-form-submit" type="submit" value="{% trans 'Filter' %}">

</form>

<h3>{% trans "Options" %}</h3>
<p>
    <a href="{% url weight.views.export_csv %}"
       target="_blank">
    <img src="{% static 'images/icons/save.svg' %}"
         width="32"
         height="32"
         alt="{% trans 'Export as CSV' %}"
         title="{% trans 'Export as CSV' %}">
        {% trans "Export as CSV" %}
    </a>
</p>

{% endblock %}
