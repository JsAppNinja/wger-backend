{% extends "base.html" %}
{% load i18n %}
{% load staticfiles %}
{% load wger_extras %}

{% block title %}{{gym}}{% endblock %}


{% block content %}
<table class="table">
<thead>
<tr>
    <th>{% trans "ID" %}</th>
    <th>{% trans "Username" %}</th>
    <th>{% trans "Name" %}</th>
</tr>
</thead>
<tbody>
{% for current_user in object_list %}
{% if not current_user.perms.any_admin %}
<tr>
    <td>
        {{current_user.obj.pk}}
    </td>
    <td>
        <a href="{% url 'core:user-overview' current_user.obj.pk %}">{{current_user.obj}}</a>
    </td>
    <td>
        {{current_user.obj.get_full_name}}
    </td>
</tr>
{% endif %}
{% empty %}
<tr>
    <td colspan="2">{% trans "No users for this gym found" %}</td>
</tr>
{% endfor %}
</tbody>
</table>



<h4>{% trans "Administrators and trainers" %}</h4>
<table class="table">
<thead>
<tr>
    <th>{% trans "ID" %}</th>
    <th>{% trans "Username" %}</th>
    <th>{% trans "Name" %}</th>
</tr>
</thead>
<tbody>
{% for current_user in object_list %}
{% if current_user.perms.any_admin %}
<tr>
    <td>
        {{current_user.obj.pk}}
    </td>
    <td>
        {{current_user.obj}}

        {% if current_user.perms.gym_trainer %}
            <span class="label label-primary">{% trans "Trainer" %}</span>
        {% endif %}

        {% if current_user.perms.manage_gym %}
            <span class="label label-primary">{% trans "Gym manager" %}</span>
        {% endif %}

        {% if current_user.perms.manage_gyms %}
            <span class="label label-primary">{% trans "General manager" %}</span>
        {% endif %}
    </td>
    <td>
        {{current_user.obj.get_full_name}}
    </td>
</tr>
{% endif %}
{% empty %}
<tr>
    <td colspan="2">{% trans "No users for this gym found" %}</td>
</tr>
{% endfor %}
</tbody>
</table>
{% endblock %}


{% block sidebar %}

{% if perms.core.manage_gym %}
<div class="btn-group pull-right">
    <button type="button" class="btn btn-default dropdown-toggle btn-xs" data-toggle="dropdown">
        {% trans "Actions" %} <span class="caret"></span>
    </button>
    <ul class="dropdown-menu" role="menu">
        <li>
            <a href="{% url 'core:gym:edit' gym.id %}" class="wger-modal-dialog">{% trans "Edit"%}</a>
        </li>
    </ul>
</div>
{% endif %}

<h4>{% trans "Details" %}</h4>
<table class="table">
    <tr>
        <th>{% trans "Name" %}</th>
        <td>{{gym.name}}</td>
    </tr>
    <tr>
        <th>{% trans "Phone" %}</th>
        <td>{{gym.phone}}</td>
    </tr>
    <tr>
        <th>{% trans "Email" %}</th>
        <td>
            {% if gym.email %}
                <a href="mailto:{{gym.email}}">{{gym.email}}</a>
            {% else %}
                -/-
            {% endif %}
        </td>
    </tr>
    <tr>
        <th>{% trans "Owner" %}</th>
        <td>{{gym.owner}}</td>
    </tr>
    <tr>
        <th>{% trans "Address" %}</th>
        <td>
            {{gym.zip_code}} {{gym.city}}<br>
            {{gym.street}}
        </td>
    </tr>
    <tr>
        <th>{% trans "Members" %}</th>
        <td>{{user_count}}</td>
    </tr>
</table>

{% if perms.core.manage_gym %}
<h4>{% trans "Options" %}</h4>
<p>
   <a href="{% url 'core:gym:add-user' gym.pk %}"
      {% auto_link_css flavour "wger-modal-dialog" %}>
   <img src="{% static 'images/icons/new.svg' %}"
        width="32"
        height="32"
        alt="{% trans 'Add member' %}"
        title="{% trans 'Add member' %}">
   {% trans "Add member" %}
   </a>
</p>
{% endif %}
{% endblock %}
